<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather and Pollution Comparison</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>Weather and Pollution Comparison</h1>
    <p>Compare weather conditions and pollution levels for different locations.</p>

    <table id="comparison-table">
        <thead>
            <tr>
                <th>Location</th>
                <th>Temperature</th>
                <th>Wind</th>
                <th>Humidity</th>
                <th>Pressure</th>
                <th>UV Index</th>
                <th>Pollutants</th>
            </tr>
        </thead>
        <tbody id="comparison-table-body">
            <!-- Dynamic rows will be inserted here -->
        </tbody>
    </table>

    <script>
        // JavaScript code to dynamically populate the table with data

        const locations = ['London', 'New York', 'Tokyo']; // List of locations to compare
        const apiKey = '6ebf69ae5cc84e2b83e200844241012'; // Weather API Key

        // Function to fetch weather and pollutants data for a given location
        const fetchWeatherData = async (location) => {
            try {
                const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${location}`);
                const data = await response.json();

                const locationData = {
                    name: data.location.name,
                    region: data.location.region,
                    country: data.location.country,
                    lat: data.location.lat,
                    lon: data.location.lon,
                    temperatureC: data.current.temp_c,
                    temperatureF: data.current.temp_f,
                    condition: data.current.condition.text,
                    windSpeedKph: data.current.wind_kph,
                    windDirection: data.current.wind_dir,
                    humidity: data.current.humidity,
                    pressureMb: data.current.pressure_mb,
                    uvIndex: data.current.uv,
                    pollutants: {
                        pm2_5: 22, // Hardcoded example pollutants, replace with actual API data if available
                        pm10: 13,
                        nitrogen_dioxide: 8,
                        ozone: 11,
                        sulphur_dioxide: 1
                    }
                };

                return locationData;
            } catch (error) {
                console.error('Error fetching weather data:', error);
            }
        };

        // Function to populate the comparison table with data
        const populateComparisonTable = async () => {
            const tableBody = document.getElementById('comparison-table-body'); // Reference to the table body

            // Clear any previous data
            tableBody.innerHTML = '';

            // Loop through each location and fetch data
            for (const location of locations) {
                const data = await fetchWeatherData(location);

                // Create the table row
                const row = document.createElement('tr');

                // Location Name
                const locationCell = document.createElement('td');
                locationCell.innerText = `${data.name}, ${data.region}, ${data.country}`;
                row.appendChild(locationCell);

                // Temperature
                const tempCell = document.createElement('td');
                tempCell.innerText = `${data.temperatureC}°C / ${data.temperatureF}°F`;
                row.appendChild(tempCell);

                // Wind Speed and Direction
                const windCell = document.createElement('td');
                windCell.innerText = `${data.windSpeedKph} km/h ${data.windDirection}`;
                row.appendChild(windCell);

                // Humidity
                const humidityCell = document.createElement('td');
                humidityCell.innerText = `${data.humidity}%`;
                row.appendChild(humidityCell);

                // Pressure
                const pressureCell = document.createElement('td');
                pressureCell.innerText = `${data.pressureMb} mb`;
                row.appendChild(pressureCell);

                // UV Index
                const uvCell = document.createElement('td');
                uvCell.innerText = `${data.uvIndex}`;
                row.appendChild(uvCell);

                // Pollutants (Example PM2.5, PM10, NO2, etc.)
                const pollutantsCell = document.createElement('td');
                pollutantsCell.innerHTML = `
                    PM2.5: ${data.pollutants.pm2_5} µg/m³<br>
                    PM10: ${data.pollutants.pm10} µg/m³<br>
                    NO2: ${data.pollutants.nitrogen_dioxide} µg/m³<br>
                    Ozone: ${data.pollutants.ozone} µg/m³<br>
                    SO2: ${data.pollutants.sulphur_dioxide} µg/m³
                `;
                row.appendChild(pollutantsCell);

                // Append the row to the table
                tableBody.appendChild(row);
            }
        };

        // Initialize the table with data
        populateComparisonTable();
    </script>
</body>
</html>
